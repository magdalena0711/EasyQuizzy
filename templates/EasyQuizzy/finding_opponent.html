<!--Ilija Miletić 2021/0335-->
{% load static %}
<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/finding_opponent_style.css' %}">
    <meta charset="UTF-8">
    <title>Traženje Protivnika</title>
</head>
<body>
    <div class="container">
        <div class="row naslov">
            <h1>Trazenje protivnika...</h1>
        </div>
        <div class="row">
            <span class="spinner-border"></span>
        </div>
        <div class="row vreme">
            <div class="col-sm-12"><h4>Vreme pretrage: 12s</h4></div>
        </div>

        <div class="row dugme">
            <div class="col-sm-12">
                <a href="test_multiplayer.html" class="btn btn-primary">Pronadji protivnika *dugme za prototip*</a>
            </div>
            <div class="col-sm-12">
                <a href="adminMainPage.html" class="btn btn-primary">Odustani od pretrage</a>
            </div>
        </div>
    </div>
</body>
</html>

{{ room_name|json_script:"room-name" }}
<script>
    const roomName = JSON.parse(document.getElementById('room-name').textContent);
    const socket = new WebSocket(
            'ws://'
            + window.location.host
            + '/ws/easyquizzy/finding/'
            + roomName
            + '/'
        );
        socket.onopen = function(event) {
        console.log('WebSocket connection established.');
        // Now you can send data through the WebSocket
        socket.send('PING');
        console.log('PING IS SENT');
        socket.onmessage = (data) => console.log(data.data);
        }
</script>